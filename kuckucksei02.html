<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch A1: Das Kuckucksei (Präposition НА)</title>
    <style>
        :root {
            /* Farbpalette: Grüne Töne */
            --primary-dark: #1b5e20;
            --primary: #2e7d32;
            --primary-light: #4caf50;
            --accent: #a5d6a7;
            --bg-page: #e8f5e9;
            --bg-card: #ffffff;
            --text-main: #212121;
            --text-white: #ffffff;
            --error: #d32f2f;
            --success: #388e3c;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background-color: var(--primary);
            color: var(--text-white);
            border-radius: var(--border-radius);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; font-size: 1.8rem; }
        p.subtitle { margin-top: 10px; opacity: 0.9; }

        /* Aufgaben-Reihe */
        .exercise-row {
            background-color: var(--bg-card);
            padding: 20px;
            margin-bottom: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-left: 5px solid var(--primary);
        }

        .task-title {
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        /* Wort-Optionen Grid */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .word-option {
            background-color: var(--bg-page);
            border: 2px solid var(--primary-light);
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            border-radius: var(--border-radius);
            font-size: 1.1rem;
            transition: all 0.2s ease;
            user-select: none;
            font-weight: 500;
        }

        .word-option:hover {
            background-color: var(--accent);
            transform: translateY(-2px);
        }

        /* Zustände der Optionen */
        .word-option.selected {
            background-color: var(--primary);
            color: var(--text-white);
            border-color: var(--primary-dark);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.2);
        }

        .word-option.correct-mark {
            background-color: var(--success) !important;
            color: white !important;
            border-color: #1b5e20 !important;
        }

        .word-option.wrong-mark {
            background-color: var(--error) !important;
            color: white !important;
            border-color: #b71c1c !important;
            animation: shake 0.4s;
        }

        /* Buttons */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }

        button {
            flex: 1;
            padding: 10px 15px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.2s;
            min-width: 120px;
        }

        .btn-check {
            background-color: var(--primary);
            color: white;
        }
        .btn-check:hover { background-color: var(--primary-dark); }

        .btn-reset {
            background-color: #cfd8dc;
            color: #455a64;
        }
        .btn-reset:hover { background-color: #b0bec5; }

        .btn-solve {
            background-color: #ffcc80;
            color: #e65100;
        }
        .btn-solve:hover { background-color: #ffb74d; }

        /* Feedback Bereich */
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: var(--border-radius);
            display: none; /* Standardmäßig ausgeblendet */
            font-size: 0.95rem;
        }

        .feedback.success {
            display: block;
            background-color: #e8f5e9;
            border: 1px solid var(--success);
            color: #2e7d32;
        }

        .feedback.error {
            display: block;
            background-color: #ffebee;
            border: 1px solid var(--error);
            color: #c62828;
        }

        .feedback.info {
            display: block;
            background-color: #fff3e0;
            border: 1px solid #ff9800;
            color: #ef6c00;
        }

        /* Animation für falsche Antwort */
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        @media (max-width: 600px) {
            .controls {
                flex-direction: column;
            }
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Das Kuckucksei: Präposition НА</h1>
        <p class="subtitle">Finden Sie in jeder Reihe das Wort, das grammatikalisch nicht zu den anderen passt.</p>
    </header>

    <!-- Container für die dynamisch generierten Aufgaben -->
    <div id="exercises-container"></div>

</div>

<script>
    // Datenstruktur für die Aufgaben
    // words: Die 4 Begriffe
    // oddIndex: Der Index des "Kuckuckseis" (0-3)
    // explanation: Erklärung warum es nicht passt
    const exercises = [
        {
            title: "Reihe 1: Veranstaltungen und Orte",
            words: ["по́чта", "конце́рт", "магази́н", "стадио́н"],
            oddIndex: 2, // магазин
            explanation: "Richtig! Wir sagen <b>в магази́не</b> (im Geschäft). Die anderen Wörter benutzen <b>на</b>: на по́чте, на конце́рте, на стадио́не."
        },
        {
            title: "Reihe 2: Offene Plätze vs. Geschlossene Räume",
            words: ["у́лица", "пло́щадь", "ры́нок", "парк"],
            oddIndex: 3, // парк
            explanation: "Korrekt! Wir sagen <b>в па́рке</b> (im Park). Die anderen sind offene Flächen und benutzen <b>на</b>: на у́лице, на пло́щади, на ры́нке."
        },
        {
            title: "Reihe 3: Aktivitäten vs. Gebäude",
            words: ["рабо́та", "бале́т", "музе́й", "вы́ставка"],
            oddIndex: 2, // музей
            explanation: "Sehr gut! Wir sagen <b>в музе́е</b> (im Museum). Die anderen Begriffe bezeichnen Aktivitäten oder Veranstaltungen und nutzen <b>на</b>: на рабо́те, на бале́те, на вы́ставке."
        },
        {
            title: "Reihe 4: Oberflächen vs. Innenräume",
            words: ["стол", "шкаф", "комната", "стена́"],
            oddIndex: 2, // комната
            explanation: "Genau! Wir sagen <b>в ко́мнате</b> (im Zimmer/Raum). Die anderen Wörter bezeichnen Oberflächen (auf...), wo wir <b>на</b> nutzen: на столе́, на шкафу́, на стене́."
        },
        {
            title: "Reihe 5: Geografie",
            words: ["Ура́л", "се́вер", "Москвá", "о́стров"],
            oddIndex: 2, // Москва
            explanation: "Richtig! Städte benutzen immer <b>в</b>: <b>в Москве́</b>. Himmelsrichtungen (на се́вере), Inseln (на о́строве) und Gebirge/Regionen (на Ура́ле) nutzen oft <b>на</b>."
        }
    ];

    // Status-Speicher für die Benutzerauswahl
    let userSelections = new Array(exercises.length).fill(null);

    // Initialisierung beim Laden
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('exercises-container');

        exercises.forEach((ex, index) => {
            const rowDiv = document.createElement('div');
            rowDiv.className = 'exercise-row';
            rowDiv.innerHTML = `
                <div class="task-title">${ex.title}</div>
                <div class="options-grid" id="grid-${index}">
                    ${ex.words.map((word, wIndex) => `
                        <div class="word-option" onclick="selectOption(${index}, ${wIndex})" id="opt-${index}-${wIndex}">
                            ${word}
                        </div>
                    `).join('')}
                </div>
                <div class="controls">
                    <button class="btn-check" onclick="checkRow(${index})">Überprüfen</button>
                    <button class="btn-reset" onclick="resetRow(${index})">Zurücksetzen</button>
                    <button class="btn-solve" onclick="showSolution(${index})">Lösung anzeigen</button>
                </div>
                <div class="feedback" id="feedback-${index}"></div>
            `;
            container.appendChild(rowDiv);
        });
    });

    // Funktion: Wort auswählen
    function selectOption(rowIndex, wordIndex) {
        // Wenn bereits überprüft/gelöst, keine Änderung mehr erlauben
        const feedbackEl = document.getElementById(`feedback-${rowIndex}`);
        if (feedbackEl.classList.contains('success') || feedbackEl.classList.contains('info')) {
            return; 
        }

        // Status speichern
        userSelections[rowIndex] = wordIndex;

        // UI aktualisieren (Klasse 'selected' setzen)
        const grid = document.getElementById(`grid-${rowIndex}`);
        const options = grid.getElementsByClassName('word-option');
        
        for (let opt of options) {
            opt.classList.remove('selected');
        }
        
        const selectedOpt = document.getElementById(`opt-${rowIndex}-${wordIndex}`);
        selectedOpt.classList.add('selected');

        // Feedback ausblenden bei neuer Auswahl
        feedbackEl.className = 'feedback';
        feedbackEl.innerHTML = '';
    }

    // Funktion: Überprüfen
    function checkRow(rowIndex) {
        const selection = userSelections[rowIndex];
        const feedbackEl = document.getElementById(`feedback-${rowIndex}`);
        const correctIndex = exercises[rowIndex].oddIndex;

        // Nichts ausgewählt?
        if (selection === null) {
            feedbackEl.className = 'feedback error';
            feedbackEl.innerHTML = 'Bitte wähle zuerst ein Wort aus.';
            return;
        }

        const selectedOpt = document.getElementById(`opt-${rowIndex}-${selection}`);

        if (selection === correctIndex) {
            // Richtig
            selectedOpt.classList.remove('selected');
            selectedOpt.classList.add('correct-mark');
            feedbackEl.className = 'feedback success';
            feedbackEl.innerHTML = exercises[rowIndex].explanation;
        } else {
            // Falsch
            selectedOpt.classList.add('wrong-mark');
            feedbackEl.className = 'feedback error';
            feedbackEl.innerHTML = 'Das ist nicht das Kuckucksei. Dieses Wort passt zur Gruppe.';
            
            // Animation resetten nach Ablauf
            setTimeout(() => {
                selectedOpt.classList.remove('wrong-mark');
            }, 500);
        }
    }

    // Funktion: Zurücksetzen
    function resetRow(rowIndex) {
        userSelections[rowIndex] = null;
        
        // CSS Klassen entfernen
        const grid = document.getElementById(`grid-${rowIndex}`);
        const options = grid.getElementsByClassName('word-option');
        for (let opt of options) {
            opt.classList.remove('selected', 'correct-mark', 'wrong-mark');
        }

        // Feedback leeren
        const feedbackEl = document.getElementById(`feedback-${rowIndex}`);
        feedbackEl.className = 'feedback';
        feedbackEl.innerHTML = '';
    }

    // Funktion: Lösung anzeigen
    function showSolution(rowIndex) {
        // Zuerst alles zurücksetzen
        resetRow(rowIndex);

        const correctIndex = exercises[rowIndex].oddIndex;
        const correctOpt = document.getElementById(`opt-${rowIndex}-${correctIndex}`);
        
        // Markieren
        correctOpt.classList.add('correct-mark');
        
        // Text anzeigen
        const feedbackEl = document.getElementById(`feedback-${rowIndex}`);
        feedbackEl.className = 'feedback info';
        feedbackEl.innerHTML = '<b>Lösung:</b> ' + exercises[rowIndex].explanation;
        
        // Auswahl blockieren (als ob man es richtig hätte)
        // userSelections[rowIndex] = correctIndex; // Optional
    }

</script>

</body>
</html>